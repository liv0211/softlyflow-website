<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数字圣所 - 你的治愈空间</title>
    <meta name="description" content="一个宁静、简约的圣所，用于减压、正念和情感安慰">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Language Selector */
        .language-selector {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .language-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .language-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 8px 0;
            min-width: 150px;
            display: none;
            z-index: 1000;
        }

        .language-dropdown.show {
            display: block;
        }

        .language-option {
            padding: 8px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .language-option:hover {
            background: #f7fafc;
        }

        .language-option.active {
            background: #e2e8f0;
            font-weight: 500;
        }

        .flag {
            width: 20px;
            height: 15px;
            background-size: cover;
            border-radius: 2px;
        }

        .flag-cn { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><rect fill="%23DE2910" width="900" height="600"/><path fill="%23FFDE00" d="M450 150l-50 150-150 50 150 50 50 150 50-150 150-50z"/></svg>'); }
        .flag-tw { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><rect fill="%23000000" width="900" height="600"/><rect fill="%23FF0000" width="900" height="300"/><rect fill="%230000FF" width="900" height="150"/><circle fill="%23FFFFFF" cx="450" cy="300" r="60"/></svg>'); }
        .flag-en { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><rect fill="%23012169" width="900" height="600"/><path fill="%23FFFFFF" d="M0 0h900v600H0z"/><path fill="%23C8102E" d="M0 0l450 300L0 600V0z"/></svg>'); }
        .flag-kr { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><rect fill="%23FFFFFF" width="900" height="600"/><circle fill="%23CD2E3A" cx="300" cy="300" r="120"/><circle fill="%23004A9C" cx="600" cy="300" r="120"/><path fill="%23CD2E3A" d="M450 150l-50 150-150 50 150 50 50 150 50-150 150-50z"/></svg>'); }
        .flag-jp { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><rect fill="%23FFFFFF" width="900" height="600"/><circle fill="%23BC002D" cx="450" cy="300" r="120"/></svg>'); }

        /* Navigation */
        .nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 40px;
        }

        .nav-btn {
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .nav-btn.active {
            background: #667eea;
            color: white;
        }

        /* Sections */
        .section {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Quote Section */
        .quote-container {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .quote {
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #4a5568;
            transition: opacity 0.3s ease;
        }

        .new-quote-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .new-quote-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        /* Timer Section */
        .timer-container {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 300;
            margin: 30px 0;
            color: #4a5568;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .timer-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .timer-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border: 3px solid #667eea;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: breathe 8s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1.1); }
            75% { transform: scale(0.9); }
        }

        .breathing-text {
            font-size: 1.2rem;
            color: #667eea;
            font-weight: 500;
        }

        /* Mystic Zone */
        .mystic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .mystic-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.3);
        }

        .mystic-card h3 {
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .mystic-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mystic-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .mystic-result {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            transition: opacity 0.3s ease;
        }

        /* Games Section */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .game-container {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #e2e8f0;
        }

        .game-container h3 {
            margin-bottom: 20px;
            color: #4a5568;
        }

        .bubble-game {
            width: 100%;
            height: 300px;
            background: linear-gradient(180deg, #e6fffa 0%, #b2f5ea 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .bubble {
            position: absolute;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.6) 100%);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bubble:hover {
            transform: scale(1.1);
        }

        .sand-canvas {
            width: 100%;
            height: 300px;
            background: #fef5e7;
            border-radius: 10px;
            cursor: crosshair;
            border: 1px solid #e2e8f0;
        }

        /* Psychology Section */
        .mood-quiz {
            max-width: 600px;
            margin: 0 auto;
        }

        .mood-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .mood-option {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mood-option:hover {
            border-color: #667eea;
            background: #edf2f7;
        }

        .mood-option input[type="radio"] {
            margin-right: 8px;
        }

        .mood-check-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .mood-check-btn:hover {
            background: #38a169;
        }

        .mood-result {
            margin-top: 20px;
            padding: 20px;
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            border-radius: 10px;
            text-align: center;
            transition: opacity 0.3s ease;
        }

        /* Breathing Exercise */
        .breathing-container {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .breathing-instructions {
            margin-bottom: 30px;
            font-size: 1.2rem;
            color: #4a5568;
        }

        .breathing-animation {
            width: 300px;
            height: 300px;
            border: 4px solid #667eea;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: breatheCycle 19s infinite ease-in-out;
        }

        @keyframes breatheCycle {
            0%, 100% { transform: scale(1); }
            12.5% { transform: scale(1.3); }
            37.5% { transform: scale(1.3); }
            62.5% { transform: scale(0.8); }
            87.5% { transform: scale(0.8); }
        }

        .breathing-step {
            font-size: 1.5rem;
            color: #667eea;
            font-weight: 500;
        }

        /* Journal Section */
        .journal-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .journal-textarea {
            width: 100%;
            height: 200px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .journal-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .journal-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .journal-btn:hover {
            background: #5a67d8;
        }

        .journal-entries {
            display: none;
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }

        .journal-entry {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 15px;
        }

        .journal-entry:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .entry-date {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 8px;
        }

        .entry-text {
            color: #4a5568;
            line-height: 1.5;
        }

        /* Nature Sounds */
        .sounds-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .sound-item {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #e2e8f0;
            text-align: center;
        }

        .sound-item h3 {
            margin-bottom: 15px;
            color: #4a5568;
        }

        .sound-toggle {
            background: #48bb78;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .sound-toggle.playing {
            background: #e53e3e;
        }

        .volume-slider {
            width: 100%;
            margin-top: 10px;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .section {
                padding: 20px;
            }
            
            .timer-display {
                font-size: 3rem;
            }
            
            .breathing-circle,
            .breathing-animation {
                width: 150px;
                height: 150px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .quote {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 data-translate="title">数字圣所</h1>
            <p data-translate="subtitle">你的宁静治愈空间</p>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <button class="language-btn" id="languageBtn">
                    <span class="flag flag-cn"></span>
                    <span data-translate="currentLang">简体中文</span>
                </button>
                <div class="language-dropdown" id="languageDropdown">
                    <div class="language-option active" data-lang="zh-CN">
                        <span class="flag flag-cn"></span>
                        简体中文
                    </div>
                    <div class="language-option" data-lang="zh-TW">
                        <span class="flag flag-tw"></span>
                        繁體中文
                    </div>
                    <div class="language-option" data-lang="en">
                        <span class="flag flag-en"></span>
                        English
                    </div>
                    <div class="language-option" data-lang="ko">
                        <span class="flag flag-kr"></span>
                        한국어
                    </div>
                    <div class="language-option" data-lang="ja">
                        <span class="flag flag-jp"></span>
                        日本語
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav">
            <button class="nav-btn active" data-section="quote" data-translate="navQuote">每日禅语</button>
            <button class="nav-btn" data-section="timer" data-translate="navTimer">专注计时</button>
            <button class="nav-btn" data-section="mystic" data-translate="navMystic">玄学区域</button>
            <button class="nav-btn" data-section="games" data-translate="navGames">减压游戏</button>
            <button class="nav-btn" data-section="psychology" data-translate="navPsychology">心理角落</button>
            <button class="nav-btn" data-section="breathing" data-translate="navBreathing">呼吸练习</button>
            <button class="nav-btn" data-section="journal" data-translate="navJournal">情感日记</button>
            <button class="nav-btn" data-section="sounds" data-translate="navSounds">自然音效</button>
        </div>

        <!-- Quote Section -->
        <div id="quote" class="section active">
            <div class="quote-container">
                <div class="quote" id="quoteText">
                    每一个今天都是昨天死去的人期待的明天。
                </div>
                <button class="new-quote-btn" id="newQuoteBtn" data-translate="newQuote">新语录</button>
            </div>
        </div>

        <!-- Timer Section -->
        <div id="timer" class="section">
            <div class="timer-container">
                <h2 data-translate="navTimer">专注计时</h2>
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div class="timer-controls">
                    <button class="timer-btn" id="startTimer" data-translate="start">开始</button>
                    <button class="timer-btn" id="pauseTimer" data-translate="pause">暂停</button>
                    <button class="timer-btn" id="resetTimer" data-translate="reset">重置</button>
                </div>
                <div class="breathing-circle">
                    <div class="breathing-text" id="breathingText">准备开始...</div>
                </div>
            </div>
        </div>

        <!-- Mystic Zone -->
        <div id="mystic" class="section">
            <h2 data-translate="navMystic">玄学区域</h2>
            <div class="mystic-grid">
                <div class="mystic-card">
                    <h3 data-translate="tarotTitle">塔罗牌</h3>
                    <button class="mystic-btn" id="tarotBtn" data-translate="drawCard">抽牌</button>
                    <div class="mystic-result" style="display: none;"></div>
                </div>
                <div class="mystic-card">
                    <h3>幸运饼干</h3>
                    <button class="mystic-btn" id="fortuneBtn">获取信息</button>
                    <div class="mystic-result" style="display: none;"></div>
                </div>
                <div class="mystic-card">
                    <h3>每日星座</h3>
                    <button class="mystic-btn" id="astrologyBtn">查看运势</button>
                    <div class="mystic-result" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Games Section -->
        <div id="games" class="section">
            <h2 data-translate="navGames">减压游戏</h2>
            <div class="games-grid">
                <div class="game-container">
                    <h3>泡泡游戏</h3>
                    <p>点击泡泡来消除它们</p>
                    <div class="bubble-game"></div>
                    <p>得分: <span id="bubbleScore">0</span></p>
                </div>
                <div class="game-container">
                    <h3>沙画板</h3>
                    <p>在画布上绘制你的想法</p>
                    <canvas class="sand-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Psychology Section -->
        <div id="psychology" class="section">
            <h2 data-translate="navPsychology">心理角落</h2>
            <div class="mood-quiz">
                <h3>今天的心情如何？</h3>
                <div class="mood-options">
                    <label class="mood-option">
                        <input type="radio" name="mood" value="happy">
                        开心 😊
                    </label>
                    <label class="mood-option">
                        <input type="radio" name="mood" value="calm">
                        平静 😌
                    </label>
                    <label class="mood-option">
                        <input type="radio" name="mood" value="anxious">
                        焦虑 😰
                    </label>
                    <label class="mood-option">
                        <input type="radio" name="mood" value="sad">
                        难过 😢
                    </label>
                    <label class="mood-option">
                        <input type="radio" name="mood" value="tired">
                        疲惫 😴
                    </label>
                </div>
                <button class="mood-check-btn" data-translate="moodCheck">检查心情</button>
                <div class="mood-result" style="display: none;"></div>
            </div>
        </div>

        <!-- Breathing Exercise -->
        <div id="breathing" class="section">
            <div class="breathing-container">
                <h2 data-translate="navBreathing">呼吸练习</h2>
                <div class="breathing-instructions">
                    <p>跟随圆圈进行4-7-8呼吸练习</p>
                </div>
                <div class="breathing-animation">
                    <div class="breathing-step" id="breathingText">准备开始...</div>
                </div>
            </div>
        </div>

        <!-- Journal Section -->
        <div id="journal" class="section">
            <div class="journal-container">
                <h2 data-translate="navJournal">情感日记</h2>
                <textarea class="journal-textarea" placeholder="写下你今天的感受..."></textarea>
                <div class="journal-controls">
                    <button class="journal-btn" data-translate="saveJournal">保存日记</button>
                    <button class="journal-btn" data-translate="viewJournal">查看记录</button>
                    <button class="journal-btn" data-translate="clearJournal">清空</button>
                </div>
                <div class="journal-entries"></div>
            </div>
        </div>

        <!-- Nature Sounds -->
        <div id="sounds" class="section">
            <h2 data-translate="navSounds">自然音效</h2>
            <div class="sounds-container">
                <div class="sound-item">
                    <h3>雨声</h3>
                    <button class="sound-toggle" data-sound="rain" data-translate="playSound">播放</button>
                    <input type="range" class="volume-slider" data-sound="rain" min="0" max="100" value="50">
                </div>
                <div class="sound-item">
                    <h3>海浪声</h3>
                    <button class="sound-toggle" data-sound="ocean" data-translate="playSound">播放</button>
                    <input type="range" class="volume-slider" data-sound="ocean" min="0" max="100" value="50">
                </div>
                <div class="sound-item">
                    <h3>森林鸟鸣</h3>
                    <button class="sound-toggle" data-sound="forest" data-translate="playSound">播放</button>
                    <input type="range" class="volume-slider" data-sound="forest" min="0" max="100" value="50">
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p data-translate="privacyNotice">隐私声明：所有数据仅存储在您的设备上。我们不会收集任何个人信息。</p>
        </div>
    </div>

    <script>
        // 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function() {
            
            // 翻译对象
            const translations = {
                'zh-CN': {
                    title: '数字圣所',
                    subtitle: '你的宁静治愈空间',
                    currentLang: '简体中文',
                    navQuote: '每日禅语',
                    navTimer: '专注计时',
                    navMystic: '玄学区域',
                    navGames: '减压游戏',
                    navPsychology: '心理角落',
                    navBreathing: '呼吸练习',
                    navJournal: '情感日记',
                    navSounds: '自然音效',
                    newQuote: '新语录',
                    start: '开始',
                    pause: '暂停',
                    reset: '重置',
                    breatheIn: '吸气',
                    breatheOut: '呼气',
                    tarotTitle: '塔罗牌',
                    drawCard: '抽牌',
                    moodCheck: '检查心情',
                    saveJournal: '保存日记',
                    viewJournal: '查看记录',
                    clearJournal: '清空',
                    playSound: '播放',
                    privacyNotice: '隐私声明：所有数据仅存储在您的设备上。我们不会收集任何个人信息。'
                },
                'zh-TW': {
                    title: '數位聖所',
                    subtitle: '你的寧靜治癒空間',
                    currentLang: '繁體中文',
                    navQuote: '每日禪語',
                    navTimer: '專注計時',
                    navMystic: '玄學區域',
                    navGames: '減壓遊戲',
                    navPsychology: '心理角落',
                    navBreathing: '呼吸練習',
                    navJournal: '情感日記',
                    navSounds: '自然音效',
                    newQuote: '新語錄',
                    start: '開始',
                    pause: '暫停',
                    reset: '重置',
                    breatheIn: '吸氣',
                    breatheOut: '呼氣',
                    tarotTitle: '塔羅牌',
                    drawCard: '抽牌',
                    moodCheck: '檢查心情',
                    saveJournal: '保存日記',
                    viewJournal: '查看記錄',
                    clearJournal: '清空',
                    playSound: '播放',
                    privacyNotice: '隱私聲明：所有數據僅存儲在您的設備上。我們不會收集任何個人信息。'
                },
                'en': {
                    title: 'Digital Sanctuary',
                    subtitle: 'Your peaceful healing space',
                    currentLang: 'English',
                    navQuote: 'Daily Quotes',
                    navTimer: 'Focus Timer',
                    navMystic: 'Mystic Zone',
                    navGames: 'Relaxing Games',
                    navPsychology: 'Psychology Corner',
                    navBreathing: 'Breathing Exercise',
                    navJournal: 'Emotional Journal',
                    navSounds: 'Nature Sounds',
                    newQuote: 'New Quote',
                    start: 'Start',
                    pause: 'Pause',
                    reset: 'Reset',
                    breatheIn: 'Breathe In',
                    breatheOut: 'Breathe Out',
                    tarotTitle: 'Tarot Cards',
                    drawCard: 'Draw Card',
                    moodCheck: 'Check Mood',
                    saveJournal: 'Save Journal',
                    viewJournal: 'View Entries',
                    clearJournal: 'Clear',
                    playSound: 'Play',
                    privacyNotice: 'Privacy Notice: All data is stored locally on your device only. We do not collect any personal information.'
                },
                'ko': {
                    title: '디지털 성소',
                    subtitle: '당신의 평화로운 치유 공간',
                    currentLang: '한국어',
                    navQuote: '일일 선어',
                    navTimer: '집중 타이머',
                    navMystic: '신비한 영역',
                    navGames: '스트레스 해소',
                    navPsychology: '심리학 코너',
                    navBreathing: '호흡 운동',
                    navJournal: '감정 일기',
                    navSounds: '자연음',
                    newQuote: '새로운 인용구',
                    start: '시작',
                    pause: '일시정지',
                    reset: '재설정',
                    breatheIn: '들숨',
                    breatheOut: '날숨',
                    tarotTitle: '타로 카드',
                    drawCard: '카드 뽑기',
                    moodCheck: '기분 확인',
                    saveJournal: '일기 저장',
                    viewJournal: '기록 보기',
                    clearJournal: '지우기',
                    playSound: '재생',
                    privacyNotice: '개인정보 보호: 모든 데이터는 귀하의 기기에만 로컬로 저장됩니다. 우리는 개인 정보를 수집하지 않습니다.'
                },
                'ja': {
                    title: 'デジタル聖所',
                    subtitle: 'あなたの静寂な癒しの空間',
                    currentLang: '日本語',
                    navQuote: '日々の禅',
                    navTimer: '集中タイマー',
                    navMystic: '神秘的な領域',
                    navGames: 'ストレス解消',
                    navPsychology: '心理学',
                    navBreathing: '呼吸運動',
                    navJournal: '感情日記',
                    navSounds: '自然音',
                    newQuote: '新しい引用',
                    start: '開始',
                    pause: '一時停止',
                    reset: 'リセット',
                    breatheIn: '吸気',
                    breatheOut: '呼気',
                    tarotTitle: 'タロットカード',
                    drawCard: 'カードを引く',
                    moodCheck: '気分チェック',
                    saveJournal: '日記を保存',
                    viewJournal: '記録を見る',
                    clearJournal: 'クリア',
                    playSound: '再生',
                    privacyNotice: 'プライバシー通知：すべてのデータはお客様のデバイスにのみローカルに保存されます。個人情報は収集いたしません。'
                }
            };

            // 治愈语录数据
            const quotes = {
                'zh-CN': [
                    "每一个今天都是昨天死去的人期待的明天。",
                    "生活不是等待暴风雨过去，而是学会在雨中起舞。",
                    "你现在的努力，是你未来的底气。",
                    "世界以痛吻我，我却报之以歌。",
                    "山有峰顶，海有彼岸，漫漫长途，终有回转。",
                    "星光不问赶路人，岁月不负有心人。",
                    "愿你有好运，如果没有，愿你在不幸中学会慈悲。",
                    "生命中最重要的不是所站的位置，而是所朝的方向。"
                ],
                'zh-TW': [
                    "每一個今天都是昨天死去的人期待的明天。",
                    "生活不是等待暴風雨過去，而是學會在雨中起舞。",
                    "你現在的努力，是你未來的底氣。",
                    "世界以痛吻我，我卻報之以歌。",
                    "山有峰頂，海有彼岸，漫長長途，終有回轉。",
                    "星光不問趕路人，歲月不負有心人。",
                    "願你有好運，如果沒有，願你在不幸中學會慈悲。",
                    "生命中最重要的不是所站的位置，而是所朝的方向。"
                ],
                'en': [
                    "Every today is the tomorrow that someone who died yesterday was looking forward to.",
                    "Life isn't about waiting for the storm to pass, it's about learning to dance in the rain.",
                    "Your current efforts are the confidence of your future.",
                    "The world kissed me with pain, but I sang back.",
                    "Mountains have peaks, seas have shores, the long journey will eventually turn around.",
                    "Stars don't ask travelers, time doesn't disappoint those who care.",
                    "May you have good luck, if not, may you learn compassion in misfortune.",
                    "The most important thing in life is not where you stand, but the direction you face."
                ],
                'ko': [
                    "오늘은 어제 죽은 사람이 기다리던 내일입니다.",
                    "인생은 폭풍이 지나가기를 기다리는 것이 아니라, 비 속에서 춤추는 법을 배우는 것입니다.",
                    "지금의 노력은 미래의 자신감입니다.",
                    "세상이 고통으로 나에게 키스를 했지만, 나는 노래로 대답했습니다.",
                    "산에는 정상이 있고, 바다에는 언덕이 있으며, 긴 여정은 결국 돌아옵니다.",
                    "별들은 여행자를 묻지 않고, 시간은 마음을 쓰는 사람을 실망시키지 않습니다.",
                    "행운이 있기를 바랍니다. 없다면, 불운 속에서 자비를 배우기를 바랍니다.",
                    "인생에서 가장 중요한 것은 서 있는 위치가 아니라 향하는 방향입니다."
                ],
                'ja': [
                    "今日は昨日死んだ人が期待していた明日です。",
                    "人生は嵐が過ぎ去るのを待つことではなく、雨の中で踊ることを学ぶことです。",
                    "今の努力は、あなたの未来の自信です。",
                    "世界は痛みで私にキスをしましたが、私は歌で返しました。",
                    "山には頂があり、海には岸があり、長い旅路は最終的に回ってきます。",
                    "星は旅人に尋ねず、時間は心を配る人を失望させません。",
                    "幸運がありますように。なければ、不幸の中で慈悲を学びますように。",
                    "人生で最も重要なのは立っている場所ではなく、向いている方向です。"
                ]
            };

            // 当前语言
            let currentLang = localStorage.getItem('lang') || 'zh-CN';
            let currentSection = 'quote';
            let timerInterval;
            let timerMinutes = 25;
            let timerSeconds = 0;
            let isTimerRunning = false;
            let bubbleScore = 0;

            // 初始化
            function init() {
                updateLanguage();
                updateActiveLanguage(currentLang);
                loadInitialQuote();
                initBubbleGame();
                initSandCanvas();
            }

            // 语言切换功能
            const languageBtn = document.getElementById('languageBtn');
            const languageDropdown = document.getElementById('languageDropdown');
            
            if (languageBtn) {
                languageBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    languageDropdown.classList.toggle('show');
                });
            }

            // 点击其他地方关闭语言下拉菜单
            document.addEventListener('click', function() {
                if (languageDropdown) {
                    languageDropdown.classList.remove('show');
                }
            });

            // 语言选项点击事件
            const languageOptions = document.querySelectorAll('.language-option');
            languageOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    if (lang && translations[lang]) {
                        currentLang = lang;
                        localStorage.setItem('lang', lang);
                        updateLanguage();
                        updateActiveLanguage(lang);
                        languageDropdown.classList.remove('show');
                    }
                });
            });

            // 更新语言显示
            function updateLanguage() {
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.dataset.translate;
                    if (translations[currentLang] && translations[currentLang][key]) {
                        element.textContent = translations[currentLang][key];
                    }
                });
                
                // 更新语言按钮显示
                if (languageBtn) {
                    const flagSpan = languageBtn.querySelector('.flag');
                    const langSpan = languageBtn.querySelector('[data-translate="currentLang"]');
                    if (flagSpan && langSpan) {
                        flagSpan.className = `flag flag-${currentLang === 'zh-CN' ? 'cn' : currentLang === 'zh-TW' ? 'tw' : currentLang}`;
                        langSpan.textContent = translations[currentLang].currentLang;
                    }
                }
            }

            // 更新活跃语言标记
            function updateActiveLanguage(lang) {
                languageOptions.forEach(option => {
                    option.classList.remove('active');
                    if (option.dataset.lang === lang) {
                        option.classList.add('active');
                    }
                });
            }

            // 导航按钮功能
            const navBtns = document.querySelectorAll('.nav-btn');
            const sections = document.querySelectorAll('.section');

            navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const sectionName = this.dataset.section;
                    
                    // 移除所有按钮的active类
                    navBtns.forEach(b => b.classList.remove('active'));
                    // 添加active类到当前按钮
                    this.classList.add('active');
                    
                    // 隐藏所有section
                    sections.forEach(section => section.classList.remove('active'));
                    // 显示目标section
                    const targetSection = document.getElementById(sectionName);
                    if (targetSection) {
                        targetSection.classList.add('active');
                        currentSection = sectionName;
                    }
                });
            });

            // 加载初始语录
            function loadInitialQuote() {
                if (quoteText) {
                    const currentQuotes = quotes[currentLang] || quotes['zh-CN'];
                    const randomIndex = Math.floor(Math.random() * currentQuotes.length);
                    quoteText.textContent = currentQuotes[randomIndex];
                }
            }

            // 语录功能
            const newQuoteBtn = document.getElementById('newQuoteBtn');
            const quoteText = document.getElementById('quoteText');

            if (newQuoteBtn) {
                newQuoteBtn.addEventListener('click', function() {
                    const currentQuotes = quotes[currentLang] || quotes['zh-CN'];
                    const randomIndex = Math.floor(Math.random() * currentQuotes.length);
                    const newQuote = currentQuotes[randomIndex];
                    
                    if (quoteText) {
                        quoteText.style.opacity = '0';
                        setTimeout(() => {
                            quoteText.textContent = newQuote;
                            quoteText.style.opacity = '1';
                        }, 300);
                    }
                });
            }

            // 定时器功能
            const startTimerBtn = document.getElementById('startTimer');
            const pauseTimerBtn = document.getElementById('pauseTimer');
            const resetTimerBtn = document.getElementById('resetTimer');
            const timerDisplay = document.getElementById('timerDisplay');

            function updateTimerDisplay() {
                const minutes = String(timerMinutes).padStart(2, '0');
                const seconds = String(timerSeconds).padStart(2, '0');
                if (timerDisplay) {
                    timerDisplay.textContent = `${minutes}:${seconds}`;
                }
            }

            function startTimer() {
                if (!isTimerRunning) {
                    isTimerRunning = true;
                    timerInterval = setInterval(() => {
                        if (timerSeconds === 0) {
                            if (timerMinutes === 0) {
                                // 计时结束
                                clearInterval(timerInterval);
                                isTimerRunning = false;
                                alert(currentLang === 'zh-CN' ? '时间到！' : 'Time\'s up!');
                                return;
                            }
                            timerMinutes--;
                            timerSeconds = 59;
                        } else {
                            timerSeconds--;
                        }
                        updateTimerDisplay();
                    }, 1000);
                }
            }

            function pauseTimer() {
                if (isTimerRunning) {
                    clearInterval(timerInterval);
                    isTimerRunning = false;
                }
            }

            function resetTimer() {
                clearInterval(timerInterval);
                isTimerRunning = false;
                timerMinutes = 25;
                timerSeconds = 0;
                updateTimerDisplay();
            }

            if (startTimerBtn) {
                startTimerBtn.addEventListener('click', startTimer);
            }
            if (pauseTimerBtn) {
                pauseTimerBtn.addEventListener('click', pauseTimer);
            }
            if (resetTimerBtn) {
                resetTimerBtn.addEventListener('click', resetTimer);
            }

            // 塔罗牌功能
            const tarotBtn = document.getElementById('tarotBtn');
            const tarotCards = [
                '愚者 - 新的开始和冒险',
                '魔术师 - 创造力和意志力',
                '女祭司 - 直觉和内在智慧',
                '皇后 - 丰饶和母性能量',
                '皇帝 - 权威和稳定',
                '教皇 - 传统和精神指导',
                '恋人 - 选择和关系',
                '战车 - 意志力和控制',
                '力量 - 内在力量和勇气',
                '隐者 - 内省和寻求真理',
                '命运之轮 - 变化和命运',
                '正义 - 平衡和公正'
            ];

            if (tarotBtn) {
                tarotBtn.addEventListener('click', function() {
                    const randomCard = tarotCards[Math.floor(Math.random() * tarotCards.length)];
                    const resultElement = this.parentElement.querySelector('.mystic-result');
                    if (resultElement) {
                        resultElement.style.display = 'block';
                        resultElement.style.opacity = '0';
                        setTimeout(() => {
                            resultElement.textContent = randomCard;
                            resultElement.style.opacity = '1';
                        }, 300);
                    }
                });
            }

            // 幸运饼干功能
            const fortuneBtn = document.getElementById('fortuneBtn');
            const fortunes = [
                '今天会有好运降临',
                '保持微笑，好事即将发生',
                '你的努力终将得到回报',
                '相信自己，你比想象中更强大',
                '每一个挑战都是成长的机会',
                '保持耐心，最好的还在后面'
            ];

            if (fortuneBtn) {
                fortuneBtn.addEventListener('click', function() {
                    const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                    const resultElement = this.parentElement.querySelector('.mystic-result');
                    if (resultElement) {
                        resultElement.style.display = 'block';
                        resultElement.style.opacity = '0';
                        setTimeout(() => {
                            resultElement.textContent = randomFortune;
                            resultElement.style.opacity = '1';
                        }, 300);
                    }
                });
            }

            // 星座运势功能
            const astrologyBtn = document.getElementById('astrologyBtn');
            const astrologyTips = [
                '白羊座：今天适合尝试新事物',
                '金牛座：保持稳定，避免冲动',
                '双子座：沟通能力增强',
                '巨蟹座：家庭关系和谐',
                '狮子座：领导才能得到认可',
                '处女座：细节处理能力提升',
                '天秤座：人际关系改善',
                '天蝎座：直觉敏锐',
                '射手座：冒险精神旺盛',
                '摩羯座：工作进展顺利',
                '水瓶座：创意灵感丰富',
                '双鱼座：艺术天赋显现'
            ];

            if (astrologyBtn) {
                astrologyBtn.addEventListener('click', function() {
                    const randomTip = astrologyTips[Math.floor(Math.random() * astrologyTips.length)];
                    const resultElement = this.parentElement.querySelector('.mystic-result');
                    if (resultElement) {
                        resultElement.style.display = 'block';
                        resultElement.style.opacity = '0';
                        setTimeout(() => {
                            resultElement.textContent = randomTip;
                            resultElement.style.opacity = '1';
                        }, 300);
                    }
                });
            }

            // 泡泡游戏
            function initBubbleGame() {
                const bubbleGame = document.querySelector('.bubble-game');
                if (!bubbleGame) return;

                function createBubble() {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    
                    const size = Math.random() * 50 + 20;
                    bubble.style.width = size + 'px';
                    bubble.style.height = size + 'px';
                    bubble.style.left = Math.random() * (bubbleGame.offsetWidth - size) + 'px';
                    bubble.style.top = bubbleGame.offsetHeight + 'px';
                    
                    bubble.addEventListener('click', function() {
                        this.remove();
                        bubbleScore++;
                        const scoreElement = document.getElementById('bubbleScore');
                        if (scoreElement) {
                            scoreElement.textContent = bubbleScore;
                        }
                    });
                    
                    bubbleGame.appendChild(bubble);
                    
                    // 让泡泡向上移动
                    let position = bubbleGame.offsetHeight;
                    const moveUp = setInterval(() => {
                        position -= 2;
                        bubble.style.top = position + 'px';
                        
                        if (position < -size) {
                            bubble.remove();
                            clearInterval(moveUp);
                        }
                    }, 50);
                }

                // 定期创建新泡泡
                setInterval(createBubble, 1000);
            }

            // 沙画游戏
            function initSandCanvas() {
                const canvas = document.querySelector('.sand-canvas');
                if (!canvas || canvas.tagName !== 'CANVAS') return;
                
                const ctx = canvas.getContext('2d');
                let isDrawing = false;
                
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                ctx.fillStyle = '#f7fafc';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mouseout', stopDrawing);
                
                function startDrawing(e) {
                    isDrawing = true;
                    draw(e);
                }
                
                function draw(e) {
                    if (!isDrawing) return;
                    
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    ctx.globalCompositeOperation = 'source-over';
                    ctx.fillStyle = '#667eea';
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                function stopDrawing() {
                    isDrawing = false;
                }
            }

            // 心理测试功能
            const moodCheckBtn = document.querySelector('.mood-check-btn');
            if (moodCheckBtn) {
                moodCheckBtn.addEventListener('click', function() {
                    const selectedMood = document.querySelector('input[name="mood"]:checked');
                    const resultElement = document.querySelector('.mood-result');
                    
                    if (!selectedMood) {
                        alert(currentLang === 'zh-CN' ? '请选择一个选项！' : 'Please select an option!');
                        return;
                    }
                    
                    const responses = {
                        'zh-CN': {
                            happy: '太好了！保持这种积极的心态，你正在发光✨',
                            calm: '内心平静是一种珍贵的状态，好好珍惜这份宁静🌸',
                            anxious: '焦虑是正常的情绪，试试深呼吸，一切都会好起来的🌈',
                            sad: '难过的时候允许自己哭泣，这也是治愈的一部分💙',
                            tired: '休息是为了走更远的路，给自己一些时间恢复能量🌙'
                        },
                        'en': {
                            happy: 'Wonderful! Keep this positive attitude, you are shining✨',
                            calm: 'Inner peace is a precious state, cherish this tranquility🌸',
                            anxious: 'Anxiety is normal, try deep breathing, everything will be fine🌈',
                            sad: 'It\'s okay to cry when sad, this is also part of healing💙',
                            tired: 'Rest is for going further, give yourself time to recover🌙'
                        }
                    };
                    
                    const mood = selectedMood.value;
                    const response = responses[currentLang] && responses[currentLang][mood] 
                                   ? responses[currentLang][mood] 
                                   : responses['zh-CN'][mood];
                    
                    if (resultElement) {
                        resultElement.style.display = 'block';
                        resultElement.style.opacity = '0';
                        setTimeout(() => {
                            resultElement.textContent = response;
                            resultElement.style.opacity = '1';
                        }, 300);
                    }
                });
            }

            // 日记功能
            let journalEntries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
            
            const journalTextarea = document.querySelector('.journal-textarea');
            const saveJournalBtn = document.querySelector('.journal-btn:first-child');
            const showEntriesBtn = document.querySelector('.journal-btn:nth-child(2)');
            const clearJournalBtn = document.querySelector('.journal-btn:last-child');
            const journalEntriesDiv = document.querySelector('.journal-entries');
            
            if (saveJournalBtn) {
                saveJournalBtn.addEventListener('click', function() {
                    if (!journalTextarea || !journalTextarea.value.trim()) {
                        alert(currentLang === 'zh-CN' ? '请写点什么再保存！' : 'Please write something before saving!');
                        return;
                    }
                    
                    const entry = {
                        date: new Date().toLocaleDateString(),
                        text: journalTextarea.value.trim()
                    };
                    
                    journalEntries.unshift(entry);
                    localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
                    journalTextarea.value = '';
                    
                    alert(currentLang === 'zh-CN' ? '日记保存成功！' : 'Journal saved successfully!');
                });
            }
            
            if (showEntriesBtn) {
                showEntriesBtn.addEventListener('click', function() {
                    if (!journalEntriesDiv) return;
                    
                    if (journalEntriesDiv.style.display === 'none' || !journalEntriesDiv.style.display) {
                        displayJournalEntries();
                        journalEntriesDiv.style.display = 'block';
                        this.textContent = currentLang === 'zh-CN' ? '隐藏记录' : 'Hide Entries';
                    } else {
                        journalEntriesDiv.style.display = 'none';
                        this.textContent = currentLang === 'zh-CN' ? '查看记录' : 'View Entries';
                    }
                });
            }

            if (clearJournalBtn) {
                clearJournalBtn.addEventListener('click', function() {
                    if (confirm(currentLang === 'zh-CN' ? '确定要清空所有日记吗？' : 'Are you sure you want to clear all journal entries?')) {
                        journalEntries = [];
                        localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
                        journalEntriesDiv.innerHTML = '';
                        journalEntriesDiv.style.display = 'none';
                        showEntriesBtn.textContent = currentLang === 'zh-CN' ? '查看记录' : 'View Entries';
                    }
                });
            }
            
            function displayJournalEntries() {
                if (!journalEntriesDiv) return;
                
                journalEntriesDiv.innerHTML = '';
                
                if (journalEntries.length === 0) {
                    journalEntriesDiv.innerHTML = `<p>${currentLang === 'zh-CN' ? '还没有日记记录' : 'No journal entries yet'}</p>`;
                    return;
                }
                
                journalEntries.forEach(entry => {
                    const entryDiv = document.createElement('div');
                    entryDiv.className = 'journal-entry';
                    entryDiv.innerHTML = `
                        <div class="entry-date">${entry.date}</div>
                        <div class="entry-text">${entry.text}</div>
                    `;
                    journalEntriesDiv.appendChild(entryDiv);
                });
            }

            // 自然音效功能
            const soundToggles = document.querySelectorAll('.sound-toggle');
            const audioElements = new Map();
            
            // 创建音频元素（这里使用占位符，实际需要真实的音频文件）
            const soundFiles = {
                rain: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAkUXrTp66hVFApGn+D1wWwiBzvS3/LCcCUFjOY=',
                ocean: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAkUXrTp66hVFApGn+D1wWwiBzvS3/LCcCUFjOY=',
                forest: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAkUXrTp66hVFApGn+D1wWwiBzvS3/LCcCUFjOY=',
                birds: 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAkUXrTp66hVFApGn+D1wWwiBzvS3/LCcCUFjOY='
            };
            
            soundToggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const soundName = this.dataset.sound;
                    
                    if (this.classList.contains('playing')) {
                        // 停止播放
                        const audio = audioElements.get(soundName);
                        if (audio) {
                            audio.pause();
                            audio.currentTime = 0;
                        }
                        this.classList.remove('playing');
                        this.textContent = currentLang === 'zh-CN' ? '播放' : 'Play';
                    } else {
                        // 开始播放
                        let audio = audioElements.get(soundName);
                        if (!audio) {
                            audio = new Audio(soundFiles[soundName] || soundFiles.rain);
                            audio.loop = true;
                            audioElements.set(soundName, audio);
                        }
                        
                        audio.play().catch(e => {
                            console.log('Audio play failed:', e);
                            alert(currentLang === 'zh-CN' ? '音频播放失败，请检查浏览器设置' : 'Audio play failed, please check browser settings');
                        });
                        
                        this.classList.add('playing');
                        this.textContent = currentLang === 'zh-CN' ? '停止' : 'Stop';
                    }
                });
            });

            // 音量控制
            const volumeSliders = document.querySelectorAll('.volume-slider');
            volumeSliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const soundName = this.dataset.sound;
                    const audio = audioElements.get(soundName);
                    if (audio) {
                        audio.volume = this.value / 100;
                    }
                });
            });

            // 呼吸练习动画控制
            const breathingText = document.getElementById('breathingText');
            let breathingPhase = 0; // 0: 吸气, 1: 屏息, 2: 呼气, 3: 暂停
            const breathingTexts = {
                'zh-CN': ['吸气 (4秒)', '屏息 (7秒)', '呼气 (8秒)', '准备...'],
                'en': ['Breathe In (4s)', 'Hold (7s)', 'Breathe Out (8s)', 'Prepare...']
            };
            const breathingDurations = [4000, 7000, 8000, 1000]; // 4-7-8呼吸法

            function updateBreathingText() {
                if (breathingText && currentSection === 'breathing') {
                    const texts = breathingTexts[currentLang] || breathingTexts['zh-CN'];
                    breathingText.textContent = texts[breathingPhase];
                    
                    setTimeout(() => {
                        breathingPhase = (breathingPhase + 1) % 4;
                        updateBreathingText();
                    }, breathingDurations[breathingPhase]);
                }
            }

            // 当切换到呼吸练习页面时开始动画
            navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.dataset.section === 'breathing') {
                        setTimeout(updateBreathingText, 500);
                    }
                });
            });

            // 初始化
            init();
            
            console.log('数字圣所初始化完成！');
        });
    </script>
</body>
</html> 